<div class="reveal" id="show-user-modal" data-reveal>
  <div class="reveal__header">
    <h3 class="reveal__title"><%= t(".title") %></h3>
    <button class="close-button" data-close aria-label="<%= t(".close_modal") %>"
      type="button">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <div class="row">
    <div class="columns medium-4 medium-centered">
      <p><%= t(".description") %></p>

      <div class="show_email">
        <h4><%= t(".full_name") %></h4>
        <div><p id="user_full_name2"></p></div>
        <h4><%= t(".user_extension") %></h4>
        <div>
          <p id="user_extension"></p>
          <p><%= t(".hidden") %></p>
        </div>
      </div>

      <div class="button--double form-general-submit">
        <button class="button" data-open="user_extension" data-open-url="">
          <%= t(".show") %>
        </button>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
$(() => {
  const $modal = $("#show-user-modal");

  if ($modal.length === 0) {
    return
  }

  const $button = $("[data-open=user_extension]", $modal);
  const $userExtension = $("#user_extension", $modal);
  const $fullName = $("#user_full_name2", $modal);

  $("[data-toggle=show-user-modal]").on("click", (event) => {
    event.preventDefault()

    $button.show()
    $button.attr("data-open-url", event.currentTarget.href)
    $fullName.text($(event.currentTarget).data("full-name"))
    $userExtension.html("")
  })
})
$(() => {
  function appendStyleElement(text) {
    var style = document.createElement('style');
    style.media = 'screen';
    style.type = 'text/css';
    var rule = document.createTextNode(text);
    style.appendChild(rule);
    var head = document.getElementsByTagName('head').item(0);
    head.appendChild(style);
  }
  appendStyleElement('.show_email #user_extension + p{display:none;color:#999;font-style: italic;}' +
                     '.show_email #user_extension:empty + p{display:block;}');
});
</script>
